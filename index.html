<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù…ÙˆÙ‚Ø¹ Ø£Ù‡Ù„ Ø§Ù„Ø®ÙŠØ± Ø§Ù„Ù†Ø³ÙˆÙŠØ©</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @keyframes zoomOut {
  from {
    transform: scale(1.2);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

.vertical-form {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  max-width: 400px;
  margin: auto;
  margin-top: 20px;
  background-color: #ffffff;
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  animation: zoomOut 0.4s ease;
  position: relative;
  z-index: 10;
}

    
    .vertical-form {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  max-width: 400px;
  margin: auto;
  background-color: #ffffff;
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.vertical-form input,
.vertical-form select,
.vertical-form button {
  width: 100%;
  margin-bottom: 15px;
  font-size: 16px;
}

    body {
      font-family: 'Tajawal', sans-serif;
      background: linear-gradient(to bottom, #e0ffe6, #a8e6cf);
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #fffffffa;
      color: #004d26;
      padding: 15px;
      font-size: 22px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .logo-small {
      height: 50px;
      margin-left: 10px;
      border-radius: 8px;
      border: 2px solid white;
    }
    .login-container, .container, .user-view {
      padding: 20px;
      text-align: center;
    }
    .login-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }
    .login-box {
      background-color: #fff;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      text-align: center;
      width: 300px;
    }
    .login-box input {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 16px;
    }
    .password-wrapper {
      position: relative;
      width: 100%;
    }
    .password-wrapper i {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      cursor: pointer;
      color: #888;
    }
    button, .buttons a {
      padding: 10px 20px;
      background-color: #005522;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }
    .announcement-box, .edit-section {
      margin: 20px auto;
      max-width: 600px;
      background: #94fa7b;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      text-align: right;
    }
    .edit-header {
      display: flex;
      align-items: center;
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .edit-header i {
      margin-left: 10px;
    }
    textarea {
      width: 100%;
      height: 100px;
      font-size: 16px;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    .announcements div {
      background-color: #d4f5dc;
      margin: 10px auto;
      padding: 15px;
      border-radius: 8px;
      max-width: 600px;
      font-size: 17px;
      font-weight: bold;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .announcements div button {
      background: none;
      border: none;
      color: red;
      font-size: 18px;
      cursor: pointer;
    }
    .user-view {
      display: none;
    }
    .announcement {
      background-color: #d4f5dc;
      margin: 20px auto;
      padding: 20px;
      border-radius: 10px;
      width: 80%;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      font-size: 18px;
      font-weight: bold;
      color: #003311;
      text-align: center;
    }
    .logo-container img {
      border: 4px solid #004d26;
      border-radius: 12px;
      max-width: 250px;
      height: auto;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }
    .buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 40px;
      gap: 15px;
    }
    .buttons a {
      background: linear-gradient(to right, #007bff, #0056b3);
      color: white;
      padding: 14px 24px;
      border-radius: 10px;
      text-decoration: none;
      font-size: 18px;
      font-weight: bold;
      transition: all 0.3s ease;
    }
    .buttons a:hover {
      background: linear-gradient(to right, #ff3333, #3db84d);
      transform: scale(1.05);
      box-shadow: 0 5px 15px rgba(255, 0, 212, 0.2);
    }
    #kafalaPage {
      display: none;
      padding: 20px;
      text-align: right;
    }
    #kafalaPage input, #kafalaPage select {
      display: block;
      width: 100%;
      padding: 10px;
      margin: 10px auto;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 16px;
      box-sizing: border-box;
    }
    footer {
      margin-top: 60px;
      background-color: #3fdd8e;
      color: white;
      text-align: center;
      padding: 15px 0;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <!-- ÙˆØ§Ø¬Ù‡Ø© Ù…Ø´Ø±ÙØ© Ø§Ù„Ø­Ø±Ù -->
<div id="letterSupervisorPanel" style="display:none; padding: 20px; text-align:right;">
  <h2 id="letterWelcome">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ù…Ø´Ø±ÙØ© Ø§Ù„Ø­Ø±Ù</h2>
  <div id="letterKafalaList">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙØ§Ù„Ø§Øª...</div>
  <br>
  <button onclick="logoutLetterSupervisor()" style="background-color: gray;">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
</div>

<div id="verifyPanel" style="display:none; padding: 20px; text-align: right;">
  <h2>Ù‚Ø³Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø´Ø±ÙØ§Øª Ø§Ù„Ø­Ø±ÙˆÙ</h2>
  <div id="verifyList"></div>

  <div class="edit-section">
    <div class="edit-header"><i class="fa fa-user"></i><i class="fa fa-cog"></i> ØªØºÙŠÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
    <input type="text" id="verifyNewUsername" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯">
    <input type="password" id="verifyNewPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©">
    <button onclick="updateVerifyLogin()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
  </div>
</div>



<div class="login-container" id="loginSection">
  <img src="https://i.imgur.com/WgyltwP.jpeg" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ù†Ø¸Ù…Ø©" style="border-radius: 8px; border: 3px solid #004d26;" width="251">
  <div class="login-box">
    <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
    <input type="text" id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
    <div class="password-wrapper">
      <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
      <i class="fa fa-eye" onclick="togglePassword()"></i>
    </div>
    <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    <br><br>
    <button onclick="showUserView()">Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø³ØªØ®Ø¯Ù…</button>
    <br><br>


  </div>
</div>
<div id="letterSupervisorForm" class="vertical-form" style="display:none;">
  <img src="https://i.imgur.com/WgyltwP.jpeg" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ù†Ø¸Ù…Ø©" style="width: 120px; border-radius: 8px; border: 3px solid #004d26; margin: auto; display: block; margin-bottom: 15px;">
  <h2 style="text-align: center; margin-bottom: 20px;">ØªØ³Ø¬ÙŠÙ„ Ù…Ø´Ø±ÙØ© Ø­Ø±Ù</h2>

  <input id="letterSupervisor_username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
  <input id="letterSupervisor_password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  
  <select id="letterSupervisor_letter">
    <option disabled selected>Ø§Ø®ØªØ± Ø§Ù„Ø­Ø±Ù Ø§Ù„Ù…Ø´Ø±ÙØ© Ø¹Ù„ÙŠÙ‡</option>
    <option value="Ø£">Ø£</option>
    <option value="Ø¨">Ø¨</option>
    <option value="Øª">Øª</option>
    <option value="Ø«">Ø«</option>
    <option value="Ø¬">Ø¬</option>
    <option value="Ø­">Ø­</option>
    <option value="Ø®">Ø®</option>
    <option value="Ø¯">Ø¯</option>
    <option value="Ø°">Ø°</option>
    <option value="Ø±">Ø±</option>
    <option value="Ø²">Ø²</option>
    <option value="Ø³">Ø³</option>
    <option value="Ø´">Ø´</option>
    <option value="Øµ">Øµ</option>
    <option value="Ø¶">Ø¶</option>
    <option value="Ø·">Ø·</option>
    <option value="Ø¸">Ø¸</option>
    <option value="Ø¹">Ø¹</option>
    <option value="Øº">Øº</option>
    <option value="Ù">Ù</option>
    <option value="Ù‚">Ù‚</option>
    <option value="Ùƒ">Ùƒ</option>
    <option value="Ù„">Ù„</option>
    <option value="Ù…">Ù…</option>
    <option value="Ù†">Ù†</option>
    <option value="Ù‡Ù€">Ù‡Ù€</option>
    <option value="Ùˆ">Ùˆ</option>
    <option value="ÙŠ">ÙŠ</option>
  </select>

  <select id="letterSupervisor_gender">
    <option disabled selected>Ù…Ø´Ø±ÙØ© Ø¹Ù„Ù‰:</option>
    <option value="Ø±Ø¬Ø§Ù„">Ø±Ø¬Ø§Ù„</option>
    <option value="Ù†Ø³Ø§Ø¡">Ù†Ø³Ø§Ø¡</option>
  </select>

 <button onclick="submitLetterSupervisor()" style="background-color: #004d26;">Ø¥Ø±Ø³Ø§Ù„</button>
  <button onclick="backToLogin()" style="background-color: rgb(131, 5, 5);">Ø±Ø¬ÙˆØ¹</button>
</div>





<!-- Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¹Ù„Ø§Ù… -->
<div style="display:none;" id="adminPanel">
  <header>Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¹Ù„Ø§Ù… <img src="https://i.imgur.com/WgyltwP.jpeg" class="logo-small"></header>
  <div class="container">
    <div class="announcement-box">
      <h2>Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h2>
      <textarea id="newAnnouncement" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù‡Ù†Ø§..."></textarea><br>
      <button onclick="addAnnouncement()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</button>
      <p id="limitMsg" style="color: red; font-weight: bold;"></p>
    </div>
    <div class="announcements" id="announcementList"></div>
    <div class="edit-section">
      <div class="edit-header"><i class="fa fa-user"></i><i class="fa fa-cog"></i> ØªØºÙŠÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
      <input type="text" id="newUsername" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯">
      <input type="password" id="newPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©">
      <button onclick="updateLogin()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
    </div>
  </div>
</div>

<!-- ØµÙØ­Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
<div class="user-view" id="userPanel">
  <header>Ù…Ù†Ø¸Ù…Ø© Ø£Ù‡Ù„ Ø§Ù„Ø®ÙŠØ± Ø§Ù„Ù†Ø³ÙˆÙŠØ©</header>
  <div class="announcement" id="userAnnouncements">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª...</div>
  <div class="logo-container">
    <img src="https://i.imgur.com/WgyltwP.jpeg" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ù†Ø¸Ù…Ø©">
  </div>
  <div class="buttons">
    <a href="https://www.tiktok.com/@ahlalkheir1" target="_blank">ØªÙŠÙƒ ØªÙˆÙƒ</a>
    <a href="https://www.facebook.com/ahl.alkhir.3" target="_blank">ÙÙŠØ³Ø¨ÙˆÙƒ</a>
    <a href="https://www.chatbase.co/chatbot-iframe/BkJ7ITdQa_AlVr3tZsXqB" target="_blank">Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ</a>
    <a href="https://wa.me/+249123161564" target="_blank">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>
    <a onclick="goToKafalaPage()" style="cursor:pointer;">ÙƒÙØ§Ù„Ø© ÙŠØªÙŠÙ…</a>
  </div>
</div>

<!-- Ø§Ø³ØªÙ…Ø§Ø±Ø© ÙƒÙØ§Ù„Ø© Ø§Ù„ÙŠØªÙŠÙ… -->
<div id="kafalaPage">
  <h2>Ø§Ø³ØªÙ…Ø§Ø±Ø© ÙƒÙØ§Ù„Ø© ÙŠØªÙŠÙ…</h2>
  <input id="kafala_name" placeholder="Ø§Ø³Ù… Ø§Ù„ÙƒÙÙŠÙ„">
  <input id="kafala_email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
  <input id="kafala_phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
  <input id="kafala_phone2" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ">
  <input id="kafala_job" placeholder="Ø§Ù„ÙˆØ¸ÙŠÙØ©">
  <input id="kafala_degree" placeholder="Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø¹Ù„Ù…ÙŠØ©">
  <input id="kafala_time" placeholder=" ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø¶Ù…Ø§Ù…">
  <select id="kafala_orphans">
    <option enabel selected>Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØªØ§Ù…</option>
  </select>
  <select id="kafala_period">
    <option disabled selected>Ù…Ø¯Ø© Ø§Ù„ÙƒÙØ§Ù„Ø©</option>
    <option>Ø´Ù‡Ø±</option>
    <option>Ø³Ù†Ø©</option>
    <option>Ø£ÙƒØ«Ø± Ù…Ù† Ø³Ù†Ø©</option>
  </select>
  <select id="kafala_gender" required>
  <option value="" disabled selected>Ø§Ø®ØªØ± Ø¬Ù†Ø³</option>
  <option value="Ø±Ø¬Ø§Ù„">Ø±Ø¬Ù„</option>
  <option value="Ù†Ø³Ø§Ø¡">Ø§Ù…Ø±Ø£Ø©</option>
</select>
  <button onclick="submitKafala()">Ø¥Ø±Ø³Ø§Ù„</button>
  <button onclick="backToUser()" style="background-color: rgb(173, 18, 18);">Ø±Ø¬ÙˆØ¹</button>
  <h2><strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> ØªÙˆØ¬Ø¯ Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ù…Ø«Ù„ ÙƒØ±ØªÙˆÙ†Ø© Ø±Ù…Ø¶Ø§Ù† ÙˆÙØ±Ø­Ø© Ø§Ù„Ø¹ÙŠØ¯ÙŠÙ†</h2>
  <h2> Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®Ø·Ø§Ø±Ù†Ø§ Ù‚Ø¨Ù„ Ø´Ù‡Ø± ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„ØºØ§Ø¡ Ø§Ù„ÙƒÙØ§Ù„Ù‡</h2>
</div>

<footer>&copy; 2025 Ù…Ù†Ø¸Ù…Ø© Ø£Ù‡Ù„ Ø§Ù„Ø®ÙŠØ± Ø§Ù„Ù†Ø³ÙˆÙŠØ©</footer>

<script>
  if (!localStorage.getItem("letterSupervisors")) {
  localStorage.setItem("letterSupervisors", "[]");
}
  function submitLetterSupervisor() {
  // 1. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
  const username = document.getElementById("letterSupervisor_username").value.trim();
  const password = document.getElementById("letterSupervisor_password").value.trim();
  const letter = document.getElementById("letterSupervisor_letter").value;
  const gender = document.getElementById("letterSupervisor_gender").value;

  // 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
  if (!username || !password || !letter || !gender) {
    alert("ÙŠØ¬Ø¨ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");
    return;
  }

  // 3. Ø¥Ù†Ø´Ø§Ø¡ ÙƒØ§Ø¦Ù† Ø§Ù„Ù…Ø´Ø±ÙØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
  const newSupervisor = {
    username,
    password,
    letter,
    gender,
    verified: false,
    registrationDate: new Date().toISOString()
  };

  try {
    // 4. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
    let supervisors = JSON.parse(localStorage.getItem("letterSupervisors") || "[]");
    
    // 5. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†ÙØ³ Ø§Ù„Ø§Ø³Ù…
    if (supervisors.some(s => s.username === username)) {
      throw new Error("Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„");
    }

    // 6. Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø´Ø±ÙØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
    supervisors.push(newSupervisor);
    
    // 7. Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    localStorage.setItem("letterSupervisors", JSON.stringify(supervisors));
    
    // 8. Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
    alert("âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙØ© Ø¨Ù†Ø¬Ø§Ø­\nØ³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„");
    
    // 9. Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
    document.getElementById("letterSupervisor_username").value = "";
    document.getElementById("letterSupervisor_password").value = "";
    document.getElementById("letterSupervisor_letter").selectedIndex = 0;
    document.getElementById("letterSupervisor_gender").selectedIndex = 0;
    
    // 10. Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    backToLogin();
    
  } catch (error) {
    alert(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ${error.message}`);
    console.error("ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø·Ø£:", error);
  }
}

function backToLogin() {
  document.getElementById("letterSupervisorForm").style.display = "none";
  document.getElementById("loginSection").style.display = "flex";
}
/* ----- Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© Ù„Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ ----- */
function initializeStorage() {
  if (!localStorage.getItem("username")) {
    localStorage.setItem("username", "admin");
    localStorage.setItem("password", "1234");
  }
  if (!localStorage.getItem("verify_user")) {
    localStorage.setItem("verify_user", "verify");
    localStorage.setItem("verify_pass", "9999");
  }
  if (!localStorage.getItem("letterSupervisors")) {
    localStorage.setItem("letterSupervisors", "[]");
  }
  if (!localStorage.getItem("verifiedSupervisors")) {
    localStorage.setItem("verifiedSupervisors", "{}");
  }
  if (!localStorage.getItem("announcements")) {
    localStorage.setItem("announcements", "[]");
  }
  if (!localStorage.getItem("kafalaForms")) {
    localStorage.setItem("kafalaForms", "[]");
  }
 if (!localStorage.getItem("staffAccounts")) {
  localStorage.setItem("staffAccounts", JSON.stringify({
    "madihah": "1111",
    "samar": "2222", 
    "lamia": "3333",
    "hadeel": "4444",
    "fai": "5555", // ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯
    "mshrefa": "7777"
  }));
}
}
initializeStorage();

/* ----- Ø¯ÙˆØ§Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ù…Ø´Ø±ÙØ§Øª ----- */
function login() {
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();

  // Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†
  if (username === "admin" && password === "1234") {
    document.getElementById("loginSection").style.display = "none";
    document.getElementById("adminPanel").style.display = "block";
    displayAnnouncements();
    return;
  }

  // Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªØ­Ù‚Ù‚
  if (username === localStorage.getItem("verify_user") && 
      password === localStorage.getItem("verify_pass")) {
    document.getElementById("loginSection").style.display = "none";
    document.getElementById("verifyPanel").style.display = "block";
    loadVerifyRequests();
    return;
  }

  // Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±ÙØ§Øª
  const staffAccounts = JSON.parse(localStorage.getItem("staffAccounts"));
  if (staffAccounts[username] && staffAccounts[username] === password) {
    if (username === "mshrefa") {
      document.getElementById("loginSection").style.display = "none";
      document.getElementById("letterSupervisorForm").style.display = "block";
    } else {
      showStaffPage(username);
    }
    return;
  }

  // Ø¯Ø®ÙˆÙ„ Ù…Ø´Ø±ÙØ§Øª Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©
  const verifiedSupervisors = JSON.parse(localStorage.getItem("verifiedSupervisors") || "{}");
  if (verifiedSupervisors[username] && verifiedSupervisors[username].password === password) {
    document.getElementById("loginSection").style.display = "none";
    document.getElementById("letterSupervisorPanel").style.display = "block";
    document.getElementById("letterWelcome").textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ù…Ø´Ø±ÙØ© Ø­Ø±Ù ${verifiedSupervisors[username].letter}`;
    return;
  }

  alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
}

function togglePassword() {
  const pwd = document.getElementById("password");
  pwd.type = pwd.type === "password" ? "text" : "password";
}

/* ----- Ø¯ÙˆØ§Ù„ Ù‚Ø³Ù… Ø§Ù„ØªØ­Ù‚Ù‚ ----- */
function loadVerifyRequests() {
  const container = document.getElementById("verifyList");
  const requests = JSON.parse(localStorage.getItem("letterSupervisors") || []);
  
  container.innerHTML = requests.map((req, index) => `
    <div style="border:1px solid #ddd; padding:15px; margin:10px 0; border-radius:8px;">
      <p><strong>ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</strong> ${req.username}</p>
      <p><strong>ğŸ”  Ø§Ù„Ø­Ø±Ù:</strong> ${req.letter}</p>
      <p><strong>ğŸ‘¥ Ø§Ù„Ù†ÙˆØ¹:</strong> ${req.gender}</p>
      <button onclick="approveRequest(${index})" style="background:#28a745; color:white; border:none; padding:8px 15px; border-radius:5px; margin:5px;">
        âœ… Ù…ÙˆØ§ÙÙ‚Ø©
      </button>
      <button onclick="rejectRequest(${index})" style="background:#dc3545; color:white; border:none; padding:8px 15px; border-radius:5px; margin:5px;">
        âŒ Ø±ÙØ¶
      </button>
    </div>
  `).join("") || "<p style='text-align:center;'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</p>";
}

function approveRequest(index) {
  const requests = JSON.parse(localStorage.getItem("letterSupervisors"));
  const approved = requests.splice(index, 1)[0];
  
  const approvedAccounts = JSON.parse(localStorage.getItem("verifiedSupervisors") || "{}");
  approvedAccounts[approved.username] = {
    password: approved.password,
    letter: approved.letter,
    gender: approved.gender
  };
  
  const staffAccounts = JSON.parse(localStorage.getItem("staffAccounts"));
  staffAccounts[approved.username] = approved.password;
  
  localStorage.setItem("verifiedSupervisors", JSON.stringify(approvedAccounts));
  localStorage.setItem("letterSupervisors", JSON.stringify(requests));
  localStorage.setItem("staffAccounts", JSON.stringify(staffAccounts));
  
  loadVerifyRequests();
  alert("ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±ÙØ© Ø¨Ù†Ø¬Ø§Ø­ ÙˆØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù„Ù‡Ø§");
}

function rejectRequest(index) {
  const requests = JSON.parse(localStorage.getItem("letterSupervisors"));
  requests.splice(index, 1);
  localStorage.setItem("letterSupervisors", JSON.stringify(requests));
  loadVerifyRequests();
}

function updateVerifyLogin() {
  const newUser = document.getElementById("verifyNewUsername").value.trim();
  const newPass = document.getElementById("verifyNewPassword").value.trim();
  
  if (newUser && newPass) {
    localStorage.setItem("verify_user", newUser);
    localStorage.setItem("verify_pass", newPass);
    alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­");
  } else {
    alert("ÙŠØ¬Ø¨ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");
  }
}

/* ----- Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø´Ø±ÙØ§Øª ----- */
function showStaffPage(staffName) {
  document.getElementById("loginSection").style.display = "none";
  document.getElementById("staffPage").style.display = "block";
  
  const verifiedSupervisors = JSON.parse(localStorage.getItem("verifiedSupervisors") || "{}");
  const supervisorData = verifiedSupervisors[staffName];
  
  // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ø±Ù ÙˆØ§Ù„Ø¬Ù†Ø³ Ù„ÙƒÙ„ Ù…Ø´Ø±ÙØ©
  let letter = null;
  let gender = null;
  
  // Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
  const staffConfig = {
    "madihah": { letter: "Ø§", gender: "Ù†Ø³Ø§Ø¡" },
    "fai": { letter: "Ø§", gender: "Ø±Ø¬Ø§Ù„" },
    "hadeel": { letter: "Ø¨", gender: "Ù†Ø³Ø§Ø¡" },
    "samar": { letter: null, gender: null }, // ØªØ³ØªÙ„Ù… ÙƒÙ„ Ø§Ù„Ù†Ø³Ø§Ø¡
    "lamia": { letter: null, gender: null }  // ØªØ³ØªÙ„Ù… ÙƒÙ„ Ø§Ù„Ù†Ø³Ø§Ø¡
  };
  
  if (staffConfig[staffName]) {
    letter = staffConfig[staffName].letter;
    gender = staffConfig[staffName].gender;
  } else if (supervisorData) {
    letter = supervisorData.letter;
    gender = supervisorData.gender;
  }
  
  document.getElementById("staffNameTitle").textContent = letter 
    ? `Ù‚Ø³Ù… Ø­Ø±Ù ${letter} (${gender})`
    : `Ù‚Ø³Ù… ${staffName}`;

  loadStaffForms(staffName, letter, gender);
}

function loadStaffForms(staffName, letter = null, gender = null) {
  const allForms = JSON.parse(localStorage.getItem("kafalaForms") || []);
  
  // ØªØµÙÙŠØ© Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø­Ø±Ù ÙˆØ§Ù„Ø¬Ù†Ø³ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø´Ø±ÙØ© Ø­Ø±Ù
  const forms = letter 
    ? allForms.filter(form => {
        const firstLetter = form.name?.charAt(0); // Ø§Ù„Ø­Ø±Ù Ø§Ù„Ø£ÙˆÙ„ Ù…Ù† Ø§Ø³Ù… Ø§Ù„ÙƒÙÙŠÙ„
        const formGender = form.gender; // Ø¬Ù†Ø³ Ø§Ù„ÙƒÙÙŠÙ„ (ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØªÙ‡ ÙÙŠ Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø§Ù„ÙƒÙØ§Ù„Ø©)
        
        return firstLetter === letter && 
               (!gender || formGender === gender);
      })
    : allForms;
  
  const container = document.getElementById("staffForms");
  
  container.innerHTML = forms.length ? forms.map((form, index) => `
    <div style="border:1px solid #ddd; padding:15px; margin:10px 0; border-radius:8px;">
      <p><strong>${index + 1} - ${form.name}</strong></p>
      <p>ğŸ“§ ${form.email} | â˜ï¸ ${form.phone}</p>
      <p>ğŸ’¼ ${form.job} | ğŸ“ ${form.degree}</p>
      <p>ğŸ‘¶ Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØªØ§Ù…: ${form.orphans} | Ø§Ù„Ù…Ø¯Ø©: ${form.period}</p>
      <p>ğŸš» Ø§Ù„Ø¬Ù†Ø³: ${form.gender || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>
    </div>
  `).join("") : "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ø³ØªÙ…Ø§Ø±Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</p>";
}

/* ----- Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ----- */
let announcements = JSON.parse(localStorage.getItem("announcements") || []);

function addAnnouncement() {
  const text = document.getElementById("newAnnouncement").value.trim();
  if (!text) {
    alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù†Øµ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†");
    return;
  }
  
  announcements.push(text);
  localStorage.setItem("announcements", JSON.stringify(announcements));
  document.getElementById("newAnnouncement").value = "";
  displayAnnouncements();
}

function displayAnnouncements() {
  const list = document.getElementById("announcementList");
  list.innerHTML = announcements.map((text, index) => `
    <div style="background:#d4f5dc; margin:10px; padding:15px; border-radius:8px;">
      ${index + 1} - ${text}
      <button onclick="deleteAnnouncement(${index})" style="float:left; background:red; color:white; border:none; border-radius:5px; padding:2px 8px;">
        Ø­Ø°Ù
      </button>
    </div>
  `).join("");
}

function deleteAnnouncement(index) {
  announcements.splice(index, 1);
  localStorage.setItem("announcements", JSON.stringify(announcements));
  displayAnnouncements();
}

/* ----- Ø¯ÙˆØ§Ù„ Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø§Ù„ÙƒÙØ§Ù„Ø© ----- */
function goToKafalaPage() {
  document.getElementById("userPanel").style.display = "none";
  document.getElementById("kafalaPage").style.display = "block";
  
  const select = document.getElementById("kafala_orphans");
  if (select.options.length <= 1) {
    for (let i = 1; i <= 100; i++) {
      const option = document.createElement("option");
      option.value = i;
      option.text = `${i} ÙŠØªÙŠÙ…`;
      select.appendChild(option);
    }
  }
}

function submitKafala() {
  const formData = {
    name: document.getElementById("kafala_name").value,
    email: document.getElementById("kafala_email").value,
    phone: document.getElementById("kafala_phone").value,
    phone2: document.getElementById("kafala_phone2").value,
    job: document.getElementById("kafala_job").value,
    degree: document.getElementById("kafala_degree").value,
    date: document.getElementById("kafala_time").value,
    orphans: document.getElementById("kafala_orphans").value,
    period: document.getElementById("kafala_period").value,
    gender: document.getElementById("kafala_gender").value // ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„
  };

  const kafalas = JSON.parse(localStorage.getItem("kafalaForms") || []);
  kafalas.push(formData);
  localStorage.setItem("kafalaForms", JSON.stringify(kafalas));
  
  alert("ØªÙ… ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø¨Ù†Ø¬Ø§Ø­");
  backToUser();
}
/* ----- Ø¯ÙˆØ§Ù„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¹Ø§Ù…Ø© ----- */
function showUserView() {
  document.getElementById("loginSection").style.display = "none";
  document.getElementById("userPanel").style.display = "block";
  
  const container = document.getElementById("userAnnouncements");
  container.innerHTML = announcements.length ? 
    announcements.map((text, index) => `<p>${index + 1} - ${text}</p>`).join("") : 
    "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</p>";
}
</script>
<!-- ØµÙØ­Ø© Ø§Ù„Ù…ÙˆØ¸Ù -->
<div id="staffPage" style="display:none; padding: 20px;">
  <h2 id="staffNameTitle">Ù‚Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù</h2>

  <div style="margin: 20px 0;">
    <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù… Ø§Ù„ÙƒÙÙŠÙ„" style="width: 80%; padding: 10px; border-radius: 8px; font-size: 16px;">
    <button onclick="searchForms()">ğŸ”</button>
  </div>

  <div id="staffForms" style="background-color: #f9f9f9; padding: 15px; border-radius: 10px;"></div>

  <div class="edit-section">
    <div class="edit-header"><i class="fa fa-user"></i><i class="fa fa-cog"></i> ØªØºÙŠÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
    <input type="text" id="staffNewUsername" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯">
    <input type="password" id="staffNewPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©">
    <button onclick="updateStaffLogin()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
  </div>
</div>

</body>
</html>